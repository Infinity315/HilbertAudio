<!DOCTYPE html>
<script type="text/javascript" src="./scripts/d3.v5.min.js"></script>
<script type="text/javascript" src="./scripts/hilbertutils.js"></script>
<link rel="stylesheet" href="style.css">

<h1>D3 Visualization of a 4x4 Hilbert curve</h1>


<body>
    <label> Choose a file to be 'Hilbertized' and listened to</label>
    <div id="curve" class="graph"></div>

    

    <div>
        <input type="file"
        id="image" name="image"
        accept="image/png, image/jpeg">
        <input type="range" value="4" id="orderInputId" min="1" max="8" step="1" oninput="orderOutputId.value = orderInputId.value; updateOrder(orderInputId.value);">  
        <output> Order: </output><output id="orderOutputId">4</output>
    </div>
    
    
</body>


<script type="text/javascript">

    var width = 600;
    var height = 600;
    var initial_order = 4;

    var svg = d3.select("#curve").append("svg")
        .attr("width", width).attr("height", height);
    
    var path = svg.append("path")
        .style("stroke", "black")
        .style("stroke-width", 64 / 2**initial_order)
        .style("opacity", 0.25)
        .style("fill", "none")
        .attr("d", generatePath(2**initial_order, width));
    
    var len = path.node().getTotalLength();

    function updateOrder(newOrder)
    {
        path
        .style("stroke", "black")
        .style("stroke-width", 64 / 2**newOrder)
        .style("opacity", 0.25)
        .style("fill", "none")
        .attr('stroke-dashoffset', 0)
        .attr("d", generatePath(2**newOrder, width))
        .transition();

        len = path.node().getTotalLength();

        path
        .attr('stroke-dasharray', len + " " + len)
        .attr("stroke-dashoffset", len)
        .transition()
        .duration(2000)
        .attr('stroke-dashoffset', 0);
        
    }



</script>

</html>